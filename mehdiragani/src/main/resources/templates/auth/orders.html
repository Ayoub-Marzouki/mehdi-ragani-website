<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Orders</title>
    <link rel="stylesheet" th:href="@{/css/sharedstyle.css}">
    <link rel="stylesheet" th:href="@{/css/orders.css}">
    <link rel="stylesheet" href="https://use.typekit.net/bpx8uhs.css">
</head>
<body th:replace="layouts/main-layout :: main-layout(~{::body/content()})">
    <div class="orders-container">
        <header class="orders-header">
            <h1>My Orders</h1>
            <p>Track your purchase history and order status</p>
            <a href="/account" class="back-link">‚Üê Back to Account</a>
        </header>

        <div class="orders-content">
            <div th:if="${orders.empty}" class="no-orders">
                <img class="icons" th:src="@{/images/icons/orders.png}" alt="No orders">
                <h2>No Orders Yet</h2>
                <p>You haven't placed any orders yet. Start exploring our collection!</p>
                <a href="/store" class="btn">Browse Artworks</a>
            </div>
            
            <div th:if="${!orders.empty}" class="orders-list">
                <div class="orders-summary">
                    <p>You have <strong th:text="${orders.size()}">0</strong> order(s)</p>
                </div>
                
                <div th:each="order : ${orders}" class="order-card">
                    <div class="order-header">
                        <div class="order-id">
                            <strong>Order #</strong>
                            <span th:text="${order.id}">Order ID</span>
                        </div>
                        <div class="order-date">
                            <strong>Date:</strong>
                            <span th:text="${#temporals.format(order.createdAt, 'dd/MM/yyyy HH:mm')}">Date</span>
                        </div>
                        <div class="order-status" th:class="${order.paymentStatus.name() == 'COMPLETED' ? 'status-completed' : order.paymentStatus.name() == 'PENDING' ? 'status-pending' : 'status-failed'}">
                            <span th:text="${order.paymentStatus.displayName}">Status</span>
                        </div>
                    </div>
                    
                    <div class="order-items">
                        <h3>Items (<span th:text="${order.items.size()}">0</span>)</h3>
                        <div class="items-list">
                            <div th:each="item : ${order.items}" class="item">
                                <img class="item-image"
                                     th:if="${item.artwork != null}"
                                     th:src="${item.artwork.mainImagePath}"
                                     th:alt="${item.artwork.title}">
                                <img class="item-image"
                                     th:if="${item.print != null}"
                                     th:src="${item.print.mainImagePath}"
                                     th:alt="${item.print.title}">
                                <div class="item-details">
                                    <h4 th:if="${item.artwork != null}" th:text="${item.artwork.title}">Artwork Title</h4>
                                    <h4 th:if="${item.print != null}" th:text="${item.print.title}">Print Title</h4>
                                    <p>Quantity: <span th:text="${item.quantity}">1</span></p>
                                    <p class="item-price" th:text="${#numbers.formatDecimal(item.lineTotal, 1, 2)} + ' ' + ${order.currency}">Price</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="order-summary">
                        <div class="order-total">
                            <strong>Total:</strong>
                            <span th:text="${#numbers.formatDecimal(order.total, 1, 2)} + ' ' + ${order.currency}">Total</span>
                        </div>
                        <div class="order-actions">
                            <a th:href="@{/account/orders/{orderId}(orderId=${order.id})}" class="btn">View Details</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 