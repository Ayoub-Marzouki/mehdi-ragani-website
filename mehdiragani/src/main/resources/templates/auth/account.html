<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account</title>
    <link rel="stylesheet" th:href="@{/css/sharedstyle.css}">
    <link rel="stylesheet" th:href="@{/css/account.css}">
    <script th:src="@{/js/shared-js.js}" defer></script>
    <link rel="stylesheet" href="https://use.typekit.net/bpx8uhs.css">
</head>
<body th:replace="layouts/main-layout :: main-layout(~{::body/content()})">
    <div class="account-container">
        <header class="account-header">
            <h1>My Account</h1>
            <p>Welcome back, <span th:text="${user.username}">User</span>!</p>
        </header>

        <div class="account-content">
            <!-- Profile Section -->
            <section class="profile-section">
                <h2>Profile Information</h2>
                <div class="profile-details">
                    <div class="profile-item">
                        <strong>Username:</strong>
                        <span th:text="${user.username}">username</span>
                    </div>
                    <div class="profile-item">
                        <strong>Email:</strong>
                        <span th:text="${user.email}">email@example.com</span>
                    </div>
                    <div class="profile-item">
                        <strong>Member since:</strong>
                        <span th:text="${user.dateCreated}">01/01/2024</span>
                    </div>
                </div>
            </section>

            <!-- Orders Overview -->
            <section class="orders-overview">
                <div class="orders-header">
                    <h2>Recent Orders</h2>
                    <a href="/account/orders" class="view-all-btn">View All Orders (<span th:text="${totalOrders}">0</span>)</a>
                </div>
                
                <div th:if="${recentOrders.empty}" class="no-orders">
                    <img class="icons" th:src="@{/images/icons/orders.png}" alt="No orders">
                    <p>You haven't placed any orders yet.</p>
                    <a href="/store" class="btn">Start Shopping</a>
                </div>
                
                <div th:if="${!recentOrders.empty}" class="orders-list">
                    <div th:each="order : ${recentOrders}" class="order-card">
                        <div class="order-header">
                            <div class="order-info">
                                <strong>Order #</strong>
                                <span th:text="${order.id}">Order ID</span>
                            </div>
                            <div class="order-status" th:class="${order.paymentStatus.name() == 'COMPLETED' ? 'status-completed' : 'status-pending'}">
                                <span th:text="${order.paymentStatus.displayName}">Status</span>
                            </div>
                        </div>
                        
                        <div class="order-details">
                            <div class="order-item">
                                <strong>Date:</strong>
                                <span th:text="${#temporals.format(order.createdAt, 'dd/MM/yyyy HH:mm')}">Date</span>
                            </div>
                            <div class="order-item">
                                <strong>Total:</strong>
                                <span th:text="${#numbers.formatDecimal(order.total, 1, 2)} + ' ' + ${order.currency}">Total</span>
                            </div>
                            <div class="order-item">
                                <strong>Items:</strong>
                                <span th:text="${order.items.size()}">0</span> artwork(s)
                            </div>
                        </div>
                        
                        <div class="order-actions">
                            <a th:href="@{/account/orders/{orderId}(orderId=${order.id})}" class="btn btn-secondary">View Details</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions -->
            <section class="quick-actions">
                <h2>Quick Actions</h2>
                <div class="action-buttons">
                    <a href="/store" class="btn">Continue Shopping</a>
                    <a href="/account/orders" class="btn btn-secondary">View All Orders</a>
                    <a href="/cart" class="btn btn-secondary">View Cart</a>
                </div>
            </section>
        </div>
    </div>
</body>
</html>
