<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin - Cart Details</title>
    <link rel="stylesheet" th:href="@{/css/sharedstyle.css}">
    <link rel="stylesheet" th:href="@{/css/cart.css}">
</head>
<body>
    <div class="cart-details-container">
        <div class="cart-details-header">Cart Details</div>
        <div class="cart-meta">
            <strong>ID:</strong> <span th:text="${cart.id}"></span><br>
            <strong>User:</strong> <span th:text="${cart.user != null ? cart.user.username : 'Guest'}"></span><br>
            <strong>Session:</strong> <span th:text="${cart.sessionId}"></span><br>
            <strong>Created:</strong> <span th:text="${#temporals.format(cart.createdAt, 'yyyy-MM-dd HH:mm')}"></span><br>
            <strong>Updated:</strong> <span th:text="${#temporals.format(cart.updatedAt, 'yyyy-MM-dd HH:mm')}"></span><br>
        </div>
        <div th:if="${cart.items != null and !cart.items.empty}">
            <div class="section-title">Original Artworks</div>
            <div th:each="item, iterStat : ${cart.items}" class="cart-item-section">
                <figure>
                    <a th:href="@{/store/{id}(id=${item.artwork.id})}">
                        <img class="artwork-image" th:src="${item.artwork.mainImagePath}" alt="Artwork Image">
                        <figcaption class="artwork-title" th:text="${item.artwork.title}">Artwork Title</figcaption>
                    </a>
                </figure>
                <div class="cart-item-details">
                    <h3>Price <span class="shipping">Shipping Included</span></h3>
                    <div th:text="${#numbers.formatDecimal(item.lineTotal, 1, 'COMMA', 2, 'POINT')} + ' DH'"></div>
                    <div><b>Quantity:</b> <span th:text="${item.quantity}"></span></div>
                </div>
            </div>
        </div>
        <div th:if="${cart.printItems != null and !cart.printItems.empty}">
            <div class="section-title">Prints</div>
            <div th:each="item, iterStat : ${cart.printItems}" class="cart-item-section">
                <figure>
                    <a th:href="@{/store/print/{id}(id=${item.print.id})}">
                        <img class="artwork-image" th:src="${item.print.mainImagePath}" alt="Print Image">
                        <figcaption class="artwork-title" th:text="${item.print.title}">Print Title</figcaption>
                    </a>
                </figure>
                <div class="cart-item-details">
                    <div><b>Type:</b> <span th:text="${item.type}"></span></div>
                    <div><b>Size:</b> <span th:text="${item.size}"></span></div>
                    <div><b>Framing:</b> <span th:text="${item.framing}"></span></div>
                    <div><b>Quantity:</b> <span th:text="${item.quantity}"></span></div>
                    <div th:text="${#numbers.formatDecimal(item.lineTotal, 1, 'COMMA', 2, 'POINT')} + ' DH'"></div>
                </div>
            </div>
        </div>
        <div th:if="${cart != null && (!cart.items.empty || !cart.printItems.empty)}" class="cart-total-section">
            <h3>Total (in dh)</h3>
            <h2 th:text="${#numbers.formatDecimal(cart.totalPrice, 1, 'COMMA', 2, 'POINT')}">0.00</h2> 
        </div>
        <a th:href="@{/admin/carts}" class="back-link">&larr; Back to Carts</a>
    </div>
</body>
</html> 